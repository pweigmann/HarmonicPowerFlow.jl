<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Functions · HarmonicPowerFlow.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">HarmonicPowerFlow.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">General</a></li><li><a class="tocitem" href="../conventions/">Conventions</a></li><li class="is-active"><a class="tocitem" href>Functions</a><ul class="internal"><li><a class="tocitem" href="#Detailed-API"><span>Detailed API</span></a></li></ul></li><li><a class="tocitem" href="../import/">Import</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Functions</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Functions</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/master/docs/src/functions.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h2 id="Detailed-API"><a class="docs-heading-anchor" href="#Detailed-API">Detailed API</a><a id="Detailed-API-1"></a><a class="docs-heading-anchor-permalink" href="#Detailed-API" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow" href="#HarmonicPowerFlow"><code>HarmonicPowerFlow</code></a> — <span class="docstring-category">Module</span></header><section><div><p>A simple and fast module to solve the harmonic power flow problem for given distribution grids.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/HarmonicPowerFlow.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow.PowerGrid" href="#HarmonicPowerFlow.PowerGrid"><code>HarmonicPowerFlow.PowerGrid</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Struct containing information about nodes and lines.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/infrastructure.jl#L5">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow.Settings" href="#HarmonicPowerFlow.Settings"><code>HarmonicPowerFlow.Settings</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Struct containing simulation settings.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/settings.jl#L2">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow.THD-Tuple{Any}" href="#HarmonicPowerFlow.THD-Tuple{Any}"><code>HarmonicPowerFlow.THD</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">THD(u)</code></pre><p>Calculate the Total Harmonic Distortion at all nodes.</p><p>THD is a measure for the amount of voltage distortion present at a node.  This function calculates two alternative definitions </p><ul><li>THD_F: relative to fundamental, more commonly used and </li><li>THD_R: RMS, relative to all frequencies</li><li>THD_40: relative to fundamental, only until h = 40 (or 39) as used by   standard EN 61000.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/evaluation.jl#L3-L15">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow.admittance_matrices-Tuple{Any, Any}" href="#HarmonicPowerFlow.admittance_matrices-Tuple{Any, Any}"><code>HarmonicPowerFlow.admittance_matrices</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">admittance_matrices(nodes, lines, harmonics)</code></pre><p>Build the nodal admittance matrices (admittance laplacian) for all harmonics. </p><p>Admittance scales with frequency: X<em>h = X</em>f * h. Return a dictionary of DataFrames.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/model.jl#L6-L12">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow.barplot_THD-Tuple{Any, Any}" href="#HarmonicPowerFlow.barplot_THD-Tuple{Any, Any}"><code>HarmonicPowerFlow.barplot_THD</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">barplot_THD(u, nodeID; h_min=1, h_max=0, yticks=0:0.1:1)</code></pre><p>Barplot of harmonic voltage magnitudes at one node.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/plots.jl#L5-L10">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow.build_harmonic_jacobian-NTuple{5, Any}" href="#HarmonicPowerFlow.build_harmonic_jacobian-NTuple{5, Any}"><code>HarmonicPowerFlow.build_harmonic_jacobian</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">build_harmonic_jacobian(net, settings, u, LY, NE)</code></pre><p>Construct harmonic Jacobian <code>J</code> containing all derivatives of power and current mismatches wrt voltages from harmonic state vector.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/model.jl#L304-L308">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow.create_nodes_manually-Tuple{}" href="#HarmonicPowerFlow.create_nodes_manually-Tuple{}"><code>HarmonicPowerFlow.create_nodes_manually</code></a> — <span class="docstring-category">Method</span></header><section><div><p>create<em>nodes</em>manually()</p><p>Manually create a nodes DataFrame. </p><p>Note that linear nodes are added first, then nonlinear ones.  Within the linear ones, first add PV, then PQ nodes. First node contains the slack.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/infrastructure.jl#L63-L70">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow.current_balance-NTuple{5, Any}" href="#HarmonicPowerFlow.current_balance-NTuple{5, Any}"><code>HarmonicPowerFlow.current_balance</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">current_balance(net, settings, u, LY, NE)</code></pre><p>Evaluate current balance at all nodes and frequencies, except linear nodes at fundamental frequency.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/model.jl#L234-L238">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow.current_injections-NTuple{5, Any}" href="#HarmonicPowerFlow.current_injections-NTuple{5, Any}"><code>HarmonicPowerFlow.current_injections</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">current_injections(nodes, nodeID, u, NE, harmonics)</code></pre><p>Calculate the harmonic current injections at one node.</p><p>Uses coupled or uncoupled method based on dimensions of NE.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/model.jl#L213-L218">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow.fund_jacobian-Tuple{Any, Any, Any}" href="#HarmonicPowerFlow.fund_jacobian-Tuple{Any, Any, Any}"><code>HarmonicPowerFlow.fund_jacobian</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">fund_jacobian(net, u, LY)</code></pre><p>Construct fundamental Jacobian, containing powers derived wrt voltages.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/model.jl#L97-L101">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow.fund_mismatch-Tuple{Any, Any, Any}" href="#HarmonicPowerFlow.fund_mismatch-Tuple{Any, Any, Any}"><code>HarmonicPowerFlow.fund_mismatch</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">fund_mismatch(net, u, LY)</code></pre><p>Evaluate active and reactive power mismatch at fundamental frequency.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/model.jl#L81-L85">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow.fund_state_vec-Tuple{Any, Any}" href="#HarmonicPowerFlow.fund_state_vec-Tuple{Any, Any}"><code>HarmonicPowerFlow.fund_state_vec</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">fund_state_vec(net, u)</code></pre><p>Take the voltage DataFrame <code>u</code> and return a vector of voltage phases and magnitudes.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/model.jl#L69-L73">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow.harmonic_mismatch-NTuple{5, Any}" href="#HarmonicPowerFlow.harmonic_mismatch-NTuple{5, Any}"><code>HarmonicPowerFlow.harmonic_mismatch</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">harmonic_mismatch(net, settings, u, LY, NE)</code></pre><p>Combine current and power mismatch to construct harmonic mismatch vector <code>f</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/model.jl#L263-L267">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow.harmonic_state_vec-Tuple{Any, Any, Any}" href="#HarmonicPowerFlow.harmonic_state_vec-Tuple{Any, Any, Any}"><code>HarmonicPowerFlow.harmonic_state_vec</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">harmonic_state_vec(net, u, harmonics)</code></pre><p>Construct harmonic state vector <code>x</code> from fundamental and harmonic voltages.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/model.jl#L286-L290">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow.heatmap_NE-Tuple{Any, Any}" href="#HarmonicPowerFlow.heatmap_NE-Tuple{Any, Any}"><code>HarmonicPowerFlow.heatmap_NE</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">heatmap_NE(nodes, settings; save=png)</code></pre><p>Export heatmap indicating magnitude of Norton equivalent parameters tp <code>.png</code> or <code>.pdf</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/plots.jl#L32-L37">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow.hpf-Tuple{Any, Any}" href="#HarmonicPowerFlow.hpf-Tuple{Any, Any}"><code>HarmonicPowerFlow.hpf</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">hpf(net, settings)</code></pre><p>Solve the harmonic power flow problem for a given <code>PowerGrid</code> and <code>Settings</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/model.jl#L427-L430">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow.import_Norton_Equivalents" href="#HarmonicPowerFlow.import_Norton_Equivalents"><code>HarmonicPowerFlow.import_Norton_Equivalents</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">import_Norton_Equivalents(nodes, settings, folder_path=&quot;devices\&quot;)</code></pre><p>Import NE parameters for all nonlinear devices in nodes from folder devices.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/model.jl#L180-L183">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow.init_power_grid-Tuple{DataFrames.DataFrame, DataFrames.DataFrame, Any}" href="#HarmonicPowerFlow.init_power_grid-Tuple{DataFrames.DataFrame, DataFrames.DataFrame, Any}"><code>HarmonicPowerFlow.init_power_grid</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">init_power_grid(nodes, lines, settings)</code></pre><p>Create a PowerGrid struct from nodes and lines DataFrames and converts all quantities to the p.u. system.</p><p>Indexing (c, m, n) could be done better by being based on number of nodes of certain type. It could make sense to also add LY to PowerGrid struct.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/infrastructure.jl#L17-L23">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow.init_settings-Tuple{Any, Any}" href="#HarmonicPowerFlow.init_settings-Tuple{Any, Any}"><code>HarmonicPowerFlow.init_settings</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">init_settings(coupled, harmonics; ...)</code></pre><p>Initialize settings struct. </p><p>Default values:</p><ul><li>base_frequency=50</li><li>base_voltage=230 </li><li>base_power=1000 </li><li>thresh_f = 1e-6 </li><li>max<em>iter</em>f = 30 </li><li>thresh_h=1e-4</li><li>max<em>iter</em>h=50</li><li>v_f=1</li><li>ϕ_f = 0 </li><li>v_h=0.1 </li><li>ϕ_h=0</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/settings.jl#L32-L49">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow.init_voltages-Tuple{Any, Any}" href="#HarmonicPowerFlow.init_voltages-Tuple{Any, Any}"><code>HarmonicPowerFlow.init_voltages</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">init_voltages(nodes, settings)</code></pre><p>Initialize voltages for all nodes and harmonics using guesses from on <code>Settings</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/model.jl#L45-L49">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow.limits-Tuple{Any, Any}" href="#HarmonicPowerFlow.limits-Tuple{Any, Any}"><code>HarmonicPowerFlow.limits</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">limits(u, nodeID)</code></pre><p>Check if harmonic limits according to EN 50160 and EN 61000 are met at node.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/evaluation.jl#L31-L35">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow.pf" href="#HarmonicPowerFlow.pf"><code>HarmonicPowerFlow.pf</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">pf(net, settings, LY, plt_convergence = false)</code></pre><p>Perform fundamental power flow, iterate until mismatch is smaller than threshold.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/model.jl#L146-L150">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow.update_fund_voltages!-Tuple{Any, Any, Any}" href="#HarmonicPowerFlow.update_fund_voltages!-Tuple{Any, Any, Any}"><code>HarmonicPowerFlow.update_fund_voltages!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">update_fund_voltages!(net, u, x)</code></pre><p>Write new voltages from <code>x</code> to <code>u</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/model.jl#L134-L138">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow.update_harmonic_voltages!-NTuple{4, Any}" href="#HarmonicPowerFlow.update_harmonic_voltages!-NTuple{4, Any}"><code>HarmonicPowerFlow.update_harmonic_voltages!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">update_fund_voltages!(net, u, x, settings)</code></pre><p>Write new voltages from <code>x</code> to <code>u</code> for all harmonics.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/model.jl#L394-L398">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HarmonicPowerFlow.update_state_vec!-Tuple{Any, Any, Any}" href="#HarmonicPowerFlow.update_state_vec!-Tuple{Any, Any, Any}"><code>HarmonicPowerFlow.update_state_vec!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">update_state_vec!(J, x, f)</code></pre><p>Perform Newton-Raphson iteration and update the fundamental state vector.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pweigmann/HarmonicPowerFlow.jl/blob/9ac1ac216360f17e5a549a17a4f6193bbca1bf87/src/model.jl#L124-L128">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../conventions/">« Conventions</a><a class="docs-footer-nextpage" href="../import/">Import »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 26 July 2021 12:11">Monday 26 July 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
